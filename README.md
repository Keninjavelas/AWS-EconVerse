# ğŸŒ EconVerse: Serverless Financial Simulation Engine

**A deterministic, event-driven economic simulation platform built on AWS Free Tier.**

EconVerse simulates a closed-loop economy where macroeconomic states, market orders, agent behaviors, and blockchain consensus evolve in discrete, replayable "ticks." It demonstrates a sophisticated **Distributed State Machine** architecture using serverless primitives.

---

## ğŸ›ï¸ System Architecture

The system avoids "monolithic game loops" in favor of a serverless, decoupled pipeline orchestrated by **AWS Step Functions**.

```mermaid
graph TD
    subgraph "Orchestration Layer (The Heartbeat)"
        User1((Admin)) -->|Manual Trigger| SFN[Step Functions State Machine]
        Scheduler(EventBridge Scheduler) -.->|Future: 1hr| SFN
    end

    subgraph "Simulation Pipeline (Linear Execution)"
        SFN -->|Step 1| Anchor[Î» Anchor Layer]
        SFN -->|Step 2| Macro[Î» Macro Layer]
        SFN -->|Step 3| Market[Î» Market Layer]
        SFN -->|Step 4| Agent[Î» Agent Layer]
        SFN -->|Step 5| Ledger[Î» Ledger Layer]
    end

    subgraph "Persistence Layer (Single Table Design)"
        Anchor -->|Write Prices| DDB[(DynamoDB Core)]
        Macro -->|Update Rates| DDB
        Market -->|Match Orders| DDB
        Agent -->|Save Decisions| DDB
        Ledger -->|Mint Block| DDB
    end

    subgraph "Public Access Layer (Observer)"
        User((Public User)) -->|GET /state| API[API Gateway]
        API -->|Invoke| Reader[Î» Reader Layer]
        Reader -->|Read Feed| DDB
    end

```

## ğŸ“¸ Visualization & Proof of Work

### 1. The Execution Graph (AWS Step Functions)

*Visual proof of the serverless orchestration logic in action.*

![Graph View](Graph_view.png)

### 2. Live Market Data (Generated Client-Side)

*Real-time asset tracking generated by `visualize.py` querying the public API.*

![Market Data](econverse_status.png)

---

## ğŸš€ Key Technical Features

* **Finite State Machine (FSM):** The entire economy advances one "Tick" at a time. If a layer fails, the simulation halts safely, preserving state integrity.
* **Single Table Design (DynamoDB):** Optimized access patterns using `PK` (Partition Key) and `SK` (Sort Key) to store disparate entities (Assets, Blocks, Logs) in a single, cost-effective table.
* **Infrastructure as Code (IaC):** Entire stack defined in Python using **AWS CDK**. No manual console clicking.
* **Cost-Bounded Engineering:** Architected strictly within the AWS Free Tier (Lambda < 400k GB-seconds, DynamoDB < 25 WCUs).
* **Random Walk Volatility:** The `Anchor Layer` implements stochastic drift logic to simulate realistic asset price movement.

---

## ğŸ› ï¸ Deployment Instructions

### Prerequisites

* AWS CLI (Configured)
* Node.js (for CDK)
* Python 3.9+

### 1. Environment Setup

```bash
# Clone and enter directory
git clone https://github.com/your-username/EconVerse.git
cd EconVerse

# Create Virtual Environment
python -m venv .venv
source .venv/bin/activate  # Windows: .venv\Scripts\activate

# Install Dependencies
pip install -r requirements.txt

```

### 2. Deploy Infrastructure

```bash
# Bootstrap AWS CDK (First time only)
cdk bootstrap

# Deploy Stack
cdk deploy --all

```

---

## ğŸ•¹ï¸ Usage & Control

### 1. Run the Simulation (Manual Trigger)

You can manually force the economy to advance by triggering the State Machine.

* Go to **AWS Console** > **Step Functions**.
* Select `EconVerse_Tick_Orchestrator`.
* Click **Start Execution**.

### 2. Access Public API

Your deployment will output an API URL in the CDK logs (e.g., `https://xyz.execute-api.us-east-1.amazonaws.com/`).

* **GET /state:** Returns the latest simulation tick and the last 5 historical entries.

### 3. Generate Visualization

Run the included data science script to visualize the market performance:

```bash
python visualize.py

```

---

## ğŸ“‚ Project Structure

```text
EconVerse/
â”œâ”€â”€ app/                        # Application Logic (The "Brains")
â”‚   â”œâ”€â”€ layers/                 # The 5 Simulation Stages
â”‚   â”‚   â”œâ”€â”€ anchor/             # Ingests/Simulates Real World Data
â”‚   â”‚   â”œâ”€â”€ macro/              # Calculates Country States (Inflation/Rates)
â”‚   â”‚   â”œâ”€â”€ market/             # Order Book Matching Engine
â”‚   â”‚   â”œâ”€â”€ agents/             # AI/Bot Decision Logic
â”‚   â”‚   â””â”€â”€ ledger/             # Blockchain Block Minting
â”‚   â”œâ”€â”€ shared/                 # Database Adapters & Utilities
â”‚   â””â”€â”€ __init__.py
â”œâ”€â”€ infra/                      # Infrastructure Definition (The "Body")
â”‚   â”œâ”€â”€ stacks/
â”‚   â”‚   â”œâ”€â”€ database_stack.py   # DynamoDB Table
â”‚   â”‚   â”œâ”€â”€ compute_stack.py    # Lambdas & Step Functions
â”‚   â”‚   â””â”€â”€ api_stack.py        # API Gateway & Reader
â”‚   â””â”€â”€ __init__.py
â”œâ”€â”€ tests/                      # Unit Tests for Market/Ledger Logic
â”‚   â”œâ”€â”€ unit/
â”‚   â”‚   â”œâ”€â”€ test_market.py
â”‚   â”‚   â”œâ”€â”€ test_ledger.py
â”‚   â”‚   â””â”€â”€ test_agents.py
â”‚   â””â”€â”€ integration/
â”œâ”€â”€ events/                     # Event Payloads for Testing
â”‚   â”œâ”€â”€ tick_trigger.json       # Step Functions Input
â”‚   â””â”€â”€ manual_shock.json       # Simulation Shock Event
â”œâ”€â”€ app.py                      # CDK App Entry Point
â”œâ”€â”€ cdk.json                    # CDK Configuration
â”œâ”€â”€ visualize.py                # Client-Side Data Visualization
â”œâ”€â”€ requirements.txt            # Python Dependencies
â””â”€â”€ README.md                   # This Documentation

```

---

## ğŸ”® Future Roadmap

* [ ] **Agent AI:** Replace random logic with Reinforcement Learning (RL) models.
* [ ] **Frontend:** React/Next.js dashboard consuming the `/state` API.
* [ ] **Multi-Asset:** Support for Forex pairs and Commodities matching.

---

*Built with â¤ï¸ and Systems Engineering by [Aryan Kapoor]*
